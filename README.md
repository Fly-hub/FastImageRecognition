# å›¾åƒå¿«é€Ÿè¯†åˆ«

# é¡¹ç›®èƒŒæ™¯
ä¸»è¦é’ˆå¯¹æ ·æœ¬é‡å°‘ã€ç±»åˆ«å¤šã€æ–°ç±»åˆ«å¢åŠ æ¯”è¾ƒå¿«ï¼Œä¸æƒ³é‡è®­æ¨¡å‹è¿™æ ·çš„æƒ…å†µï¼Œç”¨æ£€ç´¢çš„æ–¹å¼å»åšè¯†åˆ«ä¼šæœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ã€‚
å½“ç´¢å¼•åº“ä¸­çš„å›¾åƒæ— æ³•è¦†ç›–æˆ‘ä»¬å®é™…è¯†åˆ«çš„åœºæ™¯æ—¶ï¼Œå³åœ¨é¢„æµ‹æœªçŸ¥ç±»åˆ«çš„å›¾åƒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†å¯¹åº”ç±»åˆ«çš„ç›¸ä¼¼å›¾åƒæ·»åŠ åˆ°ç´¢å¼•åº“ä¸­ï¼Œä»è€Œå®Œæˆå¯¹æœªçŸ¥ç±»åˆ«çš„å›¾åƒè¯†åˆ«ï¼Œè¿™ä¸€è¿‡ç¨‹æ˜¯ä¸éœ€è¦é‡æ–°è®­ç»ƒçš„ã€‚
æ•´ä¸ªå›¾åƒè¯†åˆ«ç³»ç»Ÿåˆ†ä¸ºä¸‰æ­¥ï¼šï¼ˆ1ï¼‰é€šè¿‡ä¸€ä¸ªç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼Œæ£€æµ‹å›¾åƒç‰©ä½“å€™é€‰åŒºåŸŸï¼ˆ2ï¼‰å¯¹æ¯ä¸ªå€™é€‰åŒºåŸŸè¿›è¡Œç‰¹å¾æå–ï¼ˆ3ï¼‰ä¸æ£€ç´¢åº“ä¸­å›¾åƒè¿›è¡Œç‰¹å¾åŒ¹é…ï¼Œæå–è¯†åˆ«ç»“æœã€‚

å¯¹äºæ–°çš„æœªçŸ¥ç±»åˆ«ï¼Œæ— éœ€é‡æ–°è®­ç»ƒæ¨¡å‹ï¼Œåªéœ€è¦åœ¨æ£€ç´¢åº“è¡¥å…¥è¯¥ç±»åˆ«å›¾åƒï¼Œé‡æ–°å»ºç«‹æ£€ç´¢åº“ï¼Œå°±å¯ä»¥è¯†åˆ«è¯¥ç±»åˆ«ã€‚

# é¢„è®­ç»ƒæ¨¡å‹å’Œæ•°æ®é›†ç®€ä»‹
å®˜æ–¹æä¾›çš„è¯†åˆ«inferenceæ¨¡å‹ã€æµ‹è¯•æ•°æ®åŒ…æ‹¬Logoã€åŠ¨æ¼«äººç‰©ã€è½¦è¾†ã€å•†å“4ä¸ªæ–¹å‘ã€‚
æ£€æµ‹æ¨¡å‹ä¸4ä¸ªæ–¹å‘(Logoã€åŠ¨æ¼«äººç‰©ã€è½¦è¾†ã€å•†å“)çš„è¯†åˆ«inferenceæ¨¡å‹ã€æµ‹è¯•æ•°æ®ä¸‹è½½åœ°å€ä»¥åŠå¯¹åº”çš„é…ç½®æ–‡ä»¶åœ°å€å¦‚ä¸‹ã€‚

| æ¨¡å‹ç®€ä»‹       | æ¨èåœºæ™¯   | inferenceæ¨¡å‹  | é¢„æµ‹é…ç½®æ–‡ä»¶  | æ„å»ºç´¢å¼•åº“çš„é…ç½®æ–‡ä»¶ |
| ------------  | ------------- | -------- | ------- | -------- |
| é€šç”¨ä¸»ä½“æ£€æµ‹æ¨¡å‹ | é€šç”¨åœºæ™¯  |[æ¨¡å‹ä¸‹è½½é“¾æ¥](https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/models/inference/ppyolov2_r50vd_dcn_mainbody_v1.0_infer.tar) | - | - |
| Logoè¯†åˆ«æ¨¡å‹ | Logoåœºæ™¯  | [æ¨¡å‹ä¸‹è½½é“¾æ¥](https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/models/inference/logo_rec_ResNet50_Logo3K_v1.0_infer.tar) | [inference_logo.yaml](../../../deploy/configs/inference_logo.yaml) | [build_logo.yaml](../../../deploy/configs/build_logo.yaml) |
| åŠ¨æ¼«äººç‰©è¯†åˆ«æ¨¡å‹ | åŠ¨æ¼«äººç‰©åœºæ™¯  | [æ¨¡å‹ä¸‹è½½é“¾æ¥](https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/models/inference/cartoon_rec_ResNet50_iCartoon_v1.0_infer.tar) | [inference_cartoon.yaml](../../../deploy/configs/inference_cartoon.yaml) | [build_cartoon.yaml](../../../deploy/configs/build_cartoon.yaml) |
| è½¦è¾†ç»†åˆ†ç±»æ¨¡å‹ | è½¦è¾†åœºæ™¯  |  [æ¨¡å‹ä¸‹è½½é“¾æ¥](https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/models/inference/vehicle_cls_ResNet50_CompCars_v1.0_infer.tar) | [inference_vehicle.yaml](../../../deploy/configs/inference_vehicle.yaml) | [build_vehicle.yaml](../../../deploy/configs/build_vehicle.yaml) |
| å•†å“è¯†åˆ«æ¨¡å‹ | å•†å“åœºæ™¯  |  [æ¨¡å‹ä¸‹è½½é“¾æ¥](https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/models/inference/product_ResNet50_vd_aliproduct_v1.0_infer.tar) | [inference_product.yaml](../../../deploy/configs/inference_product.yaml) | [build_product.yaml](../../../deploy/configs/build_product.yaml) |
| è½¦è¾†ReIDæ¨¡å‹ | è½¦è¾†ReIDåœºæ™¯ | [æ¨¡å‹ä¸‹è½½é“¾æ¥](https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/models/inference/vehicle_reid_ResNet50_VERI_Wild_v1.0_infer.tar) | - | - |


demoæ•°æ®ä¸‹è½½åœ°å€å¦‚ä¸‹: [æ•°æ®ä¸‹è½½é“¾æ¥](https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/data/recognition_demo_data_v1.0.tar)ã€‚

# ç¯å¢ƒé…ç½®
å®‰è£…paddleclaså¥—ä»¶å¹¶ä¸‹è½½ç›¸å…³é¢„è®­ç»ƒæ¨¡å‹ã€‚


```python
# å…‹éš†PaddleClasæ¨¡å‹åº“
# !git clone https://github.com/PaddlePaddle/PaddleClas.git -b release/2.2
# å¦‚æœä»githubä¸Šç½‘é€Ÿå¤ªæ…¢ï¼Œå¯ä»¥ä»giteeä¸‹è½½ï¼Œä¸‹è½½å‘½ä»¤å¦‚ä¸‹ï¼š
!git clone https://gitee.com/paddlepaddle/PaddleClas.git -b release/2.2
```

    Cloning into 'PaddleClas'...
    remote: Enumerating objects: 538, done.[K
    remote: Counting objects: 100% (538/538), done.[K
    remote: Compressing objects: 100% (323/323), done.[K
    remote: Total 15290 (delta 347), reused 349 (delta 210), pack-reused 14752[K
    Receiving objects: 100% (15290/15290), 113.56 MiB | 14.73 MiB/s, done.
    Resolving deltas: 100% (10239/10239), done.
    Checking connectivity... done.



```python
# å®‰è£…Pythonä¾èµ–åº“
%cd PaddleClas/
# !pip install --upgrade -r requirements.txt -i https://mirror.baidu.com/pypi/simple ç™¾åº¦æºä¸å¥½ç”¨
!pip install -r requirements.txt
```

    /home/aistudio/PaddleClas
    Looking in indexes: https://mirror.baidu.com/pypi/simple/
    Requirement already satisfied: prettytable in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from -r requirements.txt (line 1)) (0.7.2)
    Requirement already satisfied: ujson in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from -r requirements.txt (line 2)) (1.35)
    Collecting opencv-python==3.4.9.31 (from -r requirements.txt (line 3))
    [?25l  Downloading https://mirror.baidu.com/pypi/packages/bb/3e/b70f639bbd9e463dc781d7b3b5f9102ebe3ea658682825d99948083d50fd/opencv_python-3.4.9.31-cp37-cp37m-manylinux1_x86_64.whl (28.2MB)
    [K     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 28.2MB 8.7MB/s eta 0:00:012
    [?25hRequirement already satisfied: pillow in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from -r requirements.txt (line 4)) (7.1.2)
    Requirement already satisfied: tqdm in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from -r requirements.txt (line 5)) (4.36.1)
    Requirement already satisfied: PyYAML in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from -r requirements.txt (line 6)) (5.1.2)
    Requirement already satisfied: visualdl>=2.0.0b in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from -r requirements.txt (line 7)) (2.2.0)
    Requirement already satisfied: scipy in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from -r requirements.txt (line 8)) (1.6.3)
    Collecting scikit-learn==0.23.2 (from -r requirements.txt (line 9))
    [?25l  Downloading https://mirror.baidu.com/pypi/packages/f4/cb/64623369f348e9bfb29ff898a57ac7c91ed4921f228e9726546614d63ccb/scikit_learn-0.23.2-cp37-cp37m-manylinux1_x86_64.whl (6.8MB)
    [K     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 6.8MB 14.0MB/s eta 0:00:01     |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ | 6.6MB 14.0MB/s eta 0:00:01
    [?25hRequirement already satisfied: gast==0.3.3 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from -r requirements.txt (line 10)) (0.3.3)
    Requirement already satisfied: numpy>=1.14.5 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from opencv-python==3.4.9.31->-r requirements.txt (line 3)) (1.20.3)
    Requirement already satisfied: pandas in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from visualdl>=2.0.0b->-r requirements.txt (line 7)) (1.1.5)
    Requirement already satisfied: flake8>=3.7.9 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from visualdl>=2.0.0b->-r requirements.txt (line 7)) (3.8.2)
    Requirement already satisfied: six>=1.14.0 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from visualdl>=2.0.0b->-r requirements.txt (line 7)) (1.15.0)
    Requirement already satisfied: bce-python-sdk in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from visualdl>=2.0.0b->-r requirements.txt (line 7)) (0.8.53)
    Requirement already satisfied: pre-commit in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from visualdl>=2.0.0b->-r requirements.txt (line 7)) (1.21.0)
    Requirement already satisfied: protobuf>=3.11.0 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from visualdl>=2.0.0b->-r requirements.txt (line 7)) (3.14.0)
    Requirement already satisfied: shellcheck-py in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from visualdl>=2.0.0b->-r requirements.txt (line 7)) (0.7.1.1)
    Requirement already satisfied: requests in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from visualdl>=2.0.0b->-r requirements.txt (line 7)) (2.22.0)
    Requirement already satisfied: flask>=1.1.1 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from visualdl>=2.0.0b->-r requirements.txt (line 7)) (1.1.1)
    Requirement already satisfied: Flask-Babel>=1.0.0 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from visualdl>=2.0.0b->-r requirements.txt (line 7)) (1.0.0)
    Requirement already satisfied: matplotlib in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from visualdl>=2.0.0b->-r requirements.txt (line 7)) (2.2.3)
    Requirement already satisfied: threadpoolctl>=2.0.0 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from scikit-learn==0.23.2->-r requirements.txt (line 9)) (2.1.0)
    Requirement already satisfied: joblib>=0.11 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from scikit-learn==0.23.2->-r requirements.txt (line 9)) (0.14.1)
    Requirement already satisfied: python-dateutil>=2.7.3 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from pandas->visualdl>=2.0.0b->-r requirements.txt (line 7)) (2.8.0)
    Requirement already satisfied: pytz>=2017.2 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from pandas->visualdl>=2.0.0b->-r requirements.txt (line 7)) (2019.3)
    Requirement already satisfied: mccabe<0.7.0,>=0.6.0 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from flake8>=3.7.9->visualdl>=2.0.0b->-r requirements.txt (line 7)) (0.6.1)
    Requirement already satisfied: pycodestyle<2.7.0,>=2.6.0a1 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from flake8>=3.7.9->visualdl>=2.0.0b->-r requirements.txt (line 7)) (2.6.0)
    Requirement already satisfied: importlib-metadata; python_version < "3.8" in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from flake8>=3.7.9->visualdl>=2.0.0b->-r requirements.txt (line 7)) (0.23)
    Requirement already satisfied: pyflakes<2.3.0,>=2.2.0 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from flake8>=3.7.9->visualdl>=2.0.0b->-r requirements.txt (line 7)) (2.2.0)
    Requirement already satisfied: pycryptodome>=3.8.0 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from bce-python-sdk->visualdl>=2.0.0b->-r requirements.txt (line 7)) (3.9.9)
    Requirement already satisfied: future>=0.6.0 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from bce-python-sdk->visualdl>=2.0.0b->-r requirements.txt (line 7)) (0.18.0)
    Requirement already satisfied: nodeenv>=0.11.1 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from pre-commit->visualdl>=2.0.0b->-r requirements.txt (line 7)) (1.3.4)
    Requirement already satisfied: toml in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from pre-commit->visualdl>=2.0.0b->-r requirements.txt (line 7)) (0.10.0)
    Requirement already satisfied: virtualenv>=15.2 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from pre-commit->visualdl>=2.0.0b->-r requirements.txt (line 7)) (16.7.9)
    Requirement already satisfied: cfgv>=2.0.0 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from pre-commit->visualdl>=2.0.0b->-r requirements.txt (line 7)) (2.0.1)
    Requirement already satisfied: aspy.yaml in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from pre-commit->visualdl>=2.0.0b->-r requirements.txt (line 7)) (1.3.0)
    Requirement already satisfied: identify>=1.0.0 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from pre-commit->visualdl>=2.0.0b->-r requirements.txt (line 7)) (1.4.10)
    Requirement already satisfied: chardet<3.1.0,>=3.0.2 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from requests->visualdl>=2.0.0b->-r requirements.txt (line 7)) (3.0.4)
    Requirement already satisfied: certifi>=2017.4.17 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from requests->visualdl>=2.0.0b->-r requirements.txt (line 7)) (2019.9.11)
    Requirement already satisfied: urllib3!=1.25.0,!=1.25.1,<1.26,>=1.21.1 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from requests->visualdl>=2.0.0b->-r requirements.txt (line 7)) (1.25.6)
    Requirement already satisfied: idna<2.9,>=2.5 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from requests->visualdl>=2.0.0b->-r requirements.txt (line 7)) (2.8)
    Requirement already satisfied: itsdangerous>=0.24 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from flask>=1.1.1->visualdl>=2.0.0b->-r requirements.txt (line 7)) (1.1.0)
    Requirement already satisfied: Werkzeug>=0.15 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from flask>=1.1.1->visualdl>=2.0.0b->-r requirements.txt (line 7)) (0.16.0)
    Requirement already satisfied: click>=5.1 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from flask>=1.1.1->visualdl>=2.0.0b->-r requirements.txt (line 7)) (7.0)
    Requirement already satisfied: Jinja2>=2.10.1 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from flask>=1.1.1->visualdl>=2.0.0b->-r requirements.txt (line 7)) (2.10.1)
    Requirement already satisfied: Babel>=2.3 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from Flask-Babel>=1.0.0->visualdl>=2.0.0b->-r requirements.txt (line 7)) (2.8.0)
    Requirement already satisfied: cycler>=0.10 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from matplotlib->visualdl>=2.0.0b->-r requirements.txt (line 7)) (0.10.0)
    Requirement already satisfied: pyparsing!=2.0.4,!=2.1.2,!=2.1.6,>=2.0.1 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from matplotlib->visualdl>=2.0.0b->-r requirements.txt (line 7)) (2.4.2)
    Requirement already satisfied: kiwisolver>=1.0.1 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from matplotlib->visualdl>=2.0.0b->-r requirements.txt (line 7)) (1.1.0)
    Requirement already satisfied: zipp>=0.5 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from importlib-metadata; python_version < "3.8"->flake8>=3.7.9->visualdl>=2.0.0b->-r requirements.txt (line 7)) (0.6.0)
    Requirement already satisfied: MarkupSafe>=0.23 in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from Jinja2>=2.10.1->flask>=1.1.1->visualdl>=2.0.0b->-r requirements.txt (line 7)) (1.1.1)
    Requirement already satisfied: setuptools in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from kiwisolver>=1.0.1->matplotlib->visualdl>=2.0.0b->-r requirements.txt (line 7)) (56.2.0)
    Requirement already satisfied: more-itertools in /opt/conda/envs/python35-paddle120-env/lib/python3.7/site-packages (from zipp>=0.5->importlib-metadata; python_version < "3.8"->flake8>=3.7.9->visualdl>=2.0.0b->-r requirements.txt (line 7)) (7.2.0)
    [31mERROR: blackhole 1.0.1 has requirement numpy<=1.19.5, but you'll have numpy 1.20.3 which is incompatible.[0m
    Installing collected packages: opencv-python, scikit-learn
      Found existing installation: opencv-python 4.1.1.26
        Uninstalling opencv-python-4.1.1.26:
          Successfully uninstalled opencv-python-4.1.1.26
      Found existing installation: scikit-learn 0.24.2
        Uninstalling scikit-learn-0.24.2:
          Successfully uninstalled scikit-learn-0.24.2
    Successfully installed opencv-python-3.4.9.31 scikit-learn-0.23.2



```python
pwd
```


```python
%cd ./PaddleClas/deploy
!mkdir models
%cd models
# ä¸‹è½½é€šç”¨æ£€æµ‹inferenceæ¨¡å‹å¹¶è§£å‹
!wget https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/models/inference/ppyolov2_r50vd_dcn_mainbody_v1.0_infer.tar && tar -xf ppyolov2_r50vd_dcn_mainbody_v1.0_infer.tar
# ä¸‹è½½è¯†åˆ«inferenceæ¨¡å‹å¹¶è§£å‹
!wget https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/models/inference/product_ResNet50_vd_aliproduct_v1.0_infer.tar && tar -xf product_ResNet50_vd_aliproduct_v1.0_infer.tar
```

    /home/aistudio/PaddleClas/deploy/models
    --2021-08-12 19:31:10--  https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/models/inference/ppyolov2_r50vd_dcn_mainbody_v1.0_infer.tar
    Resolving paddle-imagenet-models-name.bj.bcebos.com (paddle-imagenet-models-name.bj.bcebos.com)... 182.61.200.195, 182.61.200.229, 2409:8c04:1001:1002:0:ff:b001:368a, ...
    Connecting to paddle-imagenet-models-name.bj.bcebos.com (paddle-imagenet-models-name.bj.bcebos.com)|182.61.200.195|:443... connected.
    HTTP request sent, awaiting response... 200 OK
    Length: 202122993 (193M) [application/x-tar]
    Saving to: â€˜ppyolov2_r50vd_dcn_mainbody_v1.0_infer.tarâ€™
    
    ppyolov2_r50vd_dcn_ 100%[===================>] 192.76M  70.0MB/s    in 2.8s    
    
    2021-08-12 19:31:12 (70.0 MB/s) - â€˜ppyolov2_r50vd_dcn_mainbody_v1.0_infer.tarâ€™ saved [202122993/202122993]
    
    --2021-08-12 19:31:15--  https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/models/inference/product_ResNet50_vd_aliproduct_v1.0_infer.tar
    Resolving paddle-imagenet-models-name.bj.bcebos.com (paddle-imagenet-models-name.bj.bcebos.com)... 182.61.200.195, 182.61.200.229, 2409:8c00:6c21:10ad:0:ff:b00e:67d, ...
    Connecting to paddle-imagenet-models-name.bj.bcebos.com (paddle-imagenet-models-name.bj.bcebos.com)|182.61.200.195|:443... connected.
    HTTP request sent, awaiting response... 200 OK
    Length: 91524616 (87M) [application/x-tar]
    Saving to: â€˜product_ResNet50_vd_aliproduct_v1.0_infer.tarâ€™
    
    product_ResNet50_vd 100%[===================>]  87.28M  31.2MB/s    in 2.8s    
    
    2021-08-12 19:31:17 (31.2 MB/s) - â€˜product_ResNet50_vd_aliproduct_v1.0_infer.tarâ€™ saved [91524616/91524616]
    
    --2021-08-12 19:31:19--  https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/data/recognition_demo_data_v1.0.tar
    Resolving paddle-imagenet-models-name.bj.bcebos.com (paddle-imagenet-models-name.bj.bcebos.com)... 182.61.200.195, 182.61.200.229, 2409:8c04:1001:1002:0:ff:b001:368a, ...
    Connecting to paddle-imagenet-models-name.bj.bcebos.com (paddle-imagenet-models-name.bj.bcebos.com)|182.61.200.195|:443... connected.
    HTTP request sent, awaiting response... 200 OK
    Length: 30288352 (29M) [application/x-tar]
    Saving to: â€˜recognition_demo_data_v1.0.tarâ€™
    
    recognition_demo_da 100%[===================>]  28.88M  38.8MB/s    in 0.7s    
    
    2021-08-12 19:31:20 (38.8 MB/s) - â€˜recognition_demo_data_v1.0.tarâ€™ saved [30288352/30288352]
    


# å·²çŸ¥å›¾åƒçš„å¿«é€Ÿè¯†åˆ«
ä»¥å•†å“è¯†åˆ«ä¸ºä¾‹ï¼Œå±•ç¤ºè¯†åˆ«ä¸æ£€ç´¢è¿‡ç¨‹ï¼ˆå¦‚æœå¸Œæœ›å°è¯•å…¶ä»–æ–¹å‘çš„è¯†åˆ«ä¸æ£€ç´¢æ•ˆæœï¼Œåœ¨ä¸‹è½½è§£å‹å¥½å¯¹åº”çš„demoæ•°æ®ä¸æ¨¡å‹ä¹‹åï¼Œæ›¿æ¢å¯¹åº”çš„é…ç½®æ–‡ä»¶å³å¯å®Œæˆé¢„æµ‹ï¼‰ã€‚


```python
%cd /home/aistudio/PaddleClas/deploy
```

    /home/aistudio/PaddleClas/deploy



```python
# ä¸‹è½½demoæ•°æ®å¹¶è§£å‹
! wget https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/data/recognition_demo_data_v1.0.tar && tar -xf recognition_demo_data_v1.0.tar
```

    --2021-08-12 20:06:21--  https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/data/recognition_demo_data_v1.0.tar
    Resolving paddle-imagenet-models-name.bj.bcebos.com (paddle-imagenet-models-name.bj.bcebos.com)... 182.61.200.229, 182.61.200.195, 2409:8c04:1001:1002:0:ff:b001:368a, ...
    Connecting to paddle-imagenet-models-name.bj.bcebos.com (paddle-imagenet-models-name.bj.bcebos.com)|182.61.200.229|:443... connected.
    HTTP request sent, awaiting response... 200 OK
    Length: 30288352 (29M) [application/x-tar]
    Saving to: â€˜recognition_demo_data_v1.0.tarâ€™
    
    recognition_demo_da 100%[===================>]  28.88M  40.3MB/s    in 0.7s    
    
    2021-08-12 20:06:22 (40.3 MB/s) - â€˜recognition_demo_data_v1.0.tarâ€™ saved [30288352/30288352]
    



```python
# è§£å‹å®Œæ¯•åï¼Œ`recognition_demo_data_v1.0`æ–‡ä»¶å¤¹ä¸‹åº”æœ‰å¦‚ä¸‹æ–‡ä»¶ç»“æ„ï¼šå…¶ä¸­`gallery_xxx`æ–‡ä»¶å¤¹ä¸­å­˜æ”¾çš„æ˜¯ç”¨äºæ„å»ºç´¢å¼•åº“çš„åŸå§‹å›¾åƒï¼Œ`test_xxx`æ–‡ä»¶å¤¹ä¸­å­˜æ”¾çš„æ˜¯ç”¨äºæµ‹è¯•è¯†åˆ«æ•ˆæœçš„å›¾åƒåˆ—è¡¨ã€‚
!tree recognition_demo_data_v1.0
```

    recognition_demo_data_v1.0
    â”œâ”€â”€ gallery_cartoon
    â”‚Â Â  â”œâ”€â”€ data_file.txt
    â”‚Â Â  â”œâ”€â”€ gallery
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ aisidesi-004.png
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ aisidesi-007.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ aisidesi-008.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ labixiaoxin-001.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ labixiaoxin-005.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ labixiaoxin-007.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ liuchuanfeng-001.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ liuchuanfeng-009.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ mickeymouse-001.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ mickeymouse-002.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ mickeymouse-005.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ mingren-002.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ mingren-008.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ mingren-009.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ qilongzhu-wukong-003.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ qilongzhu-wukong-005.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ qilongzhu-wukong-006.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ zhangchulan-002.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ zhangchulan-003.jpeg
    â”‚Â Â  â”‚Â Â  â””â”€â”€ zhangchulan-006.jpeg
    â”‚Â Â  â””â”€â”€ index
    â”‚Â Â      â”œâ”€â”€ index.data
    â”‚Â Â      â”œâ”€â”€ index.graph
    â”‚Â Â      â””â”€â”€ info.json
    â”œâ”€â”€ gallery_logo
    â”‚Â Â  â”œâ”€â”€ data_file.txt
    â”‚Â Â  â”œâ”€â”€ gallery
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ benz-001.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ benz-003.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ benz-011.png
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ bmw-001.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ bmw-002.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ bmw-003.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cctv_1.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cctv_2.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cctv_3.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ mangguo_1.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ mangguo_2.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ mangguo_3.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ wangzai-001.png
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ wangzai-002.png
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ wangzai-004.png
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ zhongshiyou-001.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ zhongshiyou-002.jpeg
    â”‚Â Â  â”‚Â Â  â””â”€â”€ zhongshiyou-004.jpeg
    â”‚Â Â  â””â”€â”€ index
    â”‚Â Â      â”œâ”€â”€ index.data
    â”‚Â Â      â”œâ”€â”€ index.graph
    â”‚Â Â      â””â”€â”€ info.json
    â”œâ”€â”€ gallery_product
    â”‚Â Â  â”œâ”€â”€ data_file.txt
    â”‚Â Â  â”œâ”€â”€ data_file_update.txt
    â”‚Â Â  â”œâ”€â”€ gallery
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ anmuxi
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 001.jpg
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 002.jpg
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 003.jpg
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 004.jpg
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 005.jpg
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ 006.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ channelhandle_1.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ channelhandle_7.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ channelhandle_9.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ channelhandle_ex1.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ channelhandle_ex2.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ channelhandle_ex3.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ channelhandle_ex4.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cliniqueblush_1.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cliniqueblush_2.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cliniqueblush_7.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ daoxiangcunjinzhubing_1.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ daoxiangcunjinzhubing_2.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ daoxiangcunjinzhubing_9.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ gannidress_01.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ gannidress_05.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ gannidress_09.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ gannilianyiqun_01.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ gannilianyiqun_02.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ gannilianyiqun_04.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ gbyingerche_3.png
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ gbyingerche_4.png
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ gbyingerche_6.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ iphone12pro_6.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ iphone12pro_7.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ iphone12pro_8.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ iphone12pro_ex1.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ iphone12pro_ex2.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ lafiolewine_02.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ lafiolewine_03.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ lafiolewine_06.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ legaoaishao_3.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ legaoaishao_5.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ legaoaishao_8.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ lvnano_2.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ lvnano_5.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ lvnano_8.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ lvnano_9.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ macpro_13.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ macpro_15.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ macpro_1.png
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ macpro_2.png
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ macpro_8.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ pulipulai_4.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ pulipulai_7.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ pulipulai_8.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ quanyoushafa_1.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ quanyoushafa_3.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ quanyoushafa_6.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ taochunqiu_2.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ taochunqiu_3.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ taochunqiu_5.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ tfeyeshadow_101.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ tfeyeshadow_102.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ tfeyeshadow_103.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ tfeyeshadow_104.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ tfeyeshadow_105.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ tfeyeshadow_10.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ tfeyeshadow_1.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ tfeyeshadow_2.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ tfeyeshadow_5.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ tfeyeshadow_7.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ tfeyeshadow_9.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ thinkpad_s2_1.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ thinkpad_s2_4.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ thinkpad_s2_5.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ weiduomeinaiyougege_1.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ weiduomeinaiyougege_2.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ weiduomeinaiyougege_4.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ weiduomeinaiyougege_7.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ xiyangshen_11.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ xiyangshen_3.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ xiyangshen_6.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ yunlingicewine_02.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ yunlingicewine_03.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ yunlingicewine_05.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ yunmuerlianyiqun_4.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ yunmuerlianyiqun_5.jpg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ yunmuerlianyiqun_7.jpg
    â”‚Â Â  â”‚Â Â  â””â”€â”€ yunmuerlianyiqun_8.jpg
    â”‚Â Â  â”œâ”€â”€ index
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.data
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ index.graph
    â”‚Â Â  â”‚Â Â  â””â”€â”€ info.json
    â”‚Â Â  â””â”€â”€ index_update
    â”‚Â Â      â”œâ”€â”€ index.data
    â”‚Â Â      â”œâ”€â”€ index.graph
    â”‚Â Â      â””â”€â”€ info.json
    â”œâ”€â”€ gallery_vehicle
    â”‚Â Â  â”œâ”€â”€ data_file.txt
    â”‚Â Â  â”œâ”€â”€ gallery
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ audia4-103.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ audia4-107.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ audia4-109.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ audia5-114.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ audia5-115.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ audia5-118.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ bentian-yage-107.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ bentian-yage-108.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ bentian-yage-109.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ bmw-m340-102.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ bmw-m340-104.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ bmw-m340-105.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ porsche-cayenne-101.jpeg
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ porsche-cayenne-107.jpeg
    â”‚Â Â  â”‚Â Â  â””â”€â”€ porsche-cayenne-109.jpeg
    â”‚Â Â  â””â”€â”€ index
    â”‚Â Â      â”œâ”€â”€ index.data
    â”‚Â Â      â”œâ”€â”€ index.graph
    â”‚Â Â      â””â”€â”€ info.json
    â”œâ”€â”€ test_cartoon
    â”‚Â Â  â”œâ”€â”€ aisidesi-001.jpeg
    â”‚Â Â  â”œâ”€â”€ aisidesi-005.jpeg
    â”‚Â Â  â”œâ”€â”€ aisidesi-007.jpeg
    â”‚Â Â  â”œâ”€â”€ aisidesi-008.jpeg
    â”‚Â Â  â”œâ”€â”€ labixiaoxin-004.jpeg
    â”‚Â Â  â”œâ”€â”€ labixiaoxin-005.jpeg
    â”‚Â Â  â”œâ”€â”€ labixiaoxin-006.jpeg
    â”‚Â Â  â”œâ”€â”€ labixiaoxin-007.jpeg
    â”‚Â Â  â”œâ”€â”€ labixiaoxin-008.jpeg
    â”‚Â Â  â”œâ”€â”€ labixiaoxin-009.png
    â”‚Â Â  â”œâ”€â”€ labixiaoxin-010.jpeg
    â”‚Â Â  â”œâ”€â”€ liuchuanfeng-001.jpeg
    â”‚Â Â  â”œâ”€â”€ liuchuanfeng-009.jpeg
    â”‚Â Â  â”œâ”€â”€ liuchuanfeng-010.jpeg
    â”‚Â Â  â”œâ”€â”€ mickeymouse-003.jpeg
    â”‚Â Â  â”œâ”€â”€ mickeymouse-005.jpeg
    â”‚Â Â  â”œâ”€â”€ mingren-005.jpeg
    â”‚Â Â  â”œâ”€â”€ mingren-008.jpeg
    â”‚Â Â  â”œâ”€â”€ mingren-009.jpeg
    â”‚Â Â  â”œâ”€â”€ qilongzhu-wukong-004.jpeg
    â”‚Â Â  â”œâ”€â”€ qilongzhu-wukong-007.jpeg
    â”‚Â Â  â”œâ”€â”€ qilongzhu-wukong-008.jpeg
    â”‚Â Â  â”œâ”€â”€ qilongzhu-wukong-010.jpeg
    â”‚Â Â  â”œâ”€â”€ zhangchulan-001.jpeg
    â”‚Â Â  â”œâ”€â”€ zhangchulan-002.jpeg
    â”‚Â Â  â”œâ”€â”€ zhangchulan-004.jpeg
    â”‚Â Â  â”œâ”€â”€ zhangchulan-005.jpeg
    â”‚Â Â  â”œâ”€â”€ zhangchulan-007.jpeg
    â”‚Â Â  â””â”€â”€ zhangchulan-008.jpeg
    â”œâ”€â”€ test_logo
    â”‚Â Â  â”œâ”€â”€ benz-001.jpeg
    â”‚Â Â  â”œâ”€â”€ benz-003.jpeg
    â”‚Â Â  â”œâ”€â”€ benz-008.jpeg
    â”‚Â Â  â”œâ”€â”€ benz-009.jpeg
    â”‚Â Â  â”œâ”€â”€ benz-010.jpeg
    â”‚Â Â  â”œâ”€â”€ benz-011.jpeg
    â”‚Â Â  â”œâ”€â”€ bmw-002.jpeg
    â”‚Â Â  â”œâ”€â”€ bmw-003.jpeg
    â”‚Â Â  â”œâ”€â”€ bmw-004.jpeg
    â”‚Â Â  â”œâ”€â”€ bmw-014.jpeg
    â”‚Â Â  â”œâ”€â”€ bmw-101.jpeg
    â”‚Â Â  â”œâ”€â”€ bmw-102.jpeg
    â”‚Â Â  â”œâ”€â”€ bmw-103.jpeg
    â”‚Â Â  â”œâ”€â”€ cctv_1.jpeg
    â”‚Â Â  â”œâ”€â”€ cctv_2.jpeg
    â”‚Â Â  â”œâ”€â”€ cctv_3.jpeg
    â”‚Â Â  â”œâ”€â”€ cctv_4.jpg
    â”‚Â Â  â”œâ”€â”€ cctv_5.jpg
    â”‚Â Â  â”œâ”€â”€ cctv_7.jpg
    â”‚Â Â  â”œâ”€â”€ mangguo_10.jpeg
    â”‚Â Â  â”œâ”€â”€ mangguo_1.jpeg
    â”‚Â Â  â”œâ”€â”€ mangguo_2.jpeg
    â”‚Â Â  â”œâ”€â”€ mangguo_3.jpeg
    â”‚Â Â  â”œâ”€â”€ mangguo_6.jpeg
    â”‚Â Â  â”œâ”€â”€ mangguo_7.jpeg
    â”‚Â Â  â”œâ”€â”€ mangguo_8.jpeg
    â”‚Â Â  â”œâ”€â”€ wangzai-002.jpeg
    â”‚Â Â  â”œâ”€â”€ wangzai-003.png
    â”‚Â Â  â”œâ”€â”€ wangzai-004.jpeg
    â”‚Â Â  â”œâ”€â”€ wangzai-005.jpeg
    â”‚Â Â  â”œâ”€â”€ wangzai-006.jpeg
    â”‚Â Â  â”œâ”€â”€ wangzai-007.jpeg
    â”‚Â Â  â”œâ”€â”€ wangzai-008.jpeg
    â”‚Â Â  â”œâ”€â”€ zhongshiyou-001.jpeg
    â”‚Â Â  â”œâ”€â”€ zhongshiyou-002.jpeg
    â”‚Â Â  â”œâ”€â”€ zhongshiyou-004.jpeg
    â”‚Â Â  â”œâ”€â”€ zhongshiyou-005.jpeg
    â”‚Â Â  â”œâ”€â”€ zhongshiyou-006.jpg
    â”‚Â Â  â””â”€â”€ zhongshiyou-007.jpg
    â”œâ”€â”€ test_product
    â”‚Â Â  â”œâ”€â”€ anmuxi.jpg
    â”‚Â Â  â”œâ”€â”€ channelhandle_10.jpg
    â”‚Â Â  â”œâ”€â”€ channelhandle_3.jpg
    â”‚Â Â  â”œâ”€â”€ channelhandle_5.jpg
    â”‚Â Â  â”œâ”€â”€ channelhandle_6.jpg
    â”‚Â Â  â”œâ”€â”€ channelhandle_7.jpg
    â”‚Â Â  â”œâ”€â”€ channelhandle_8.jpg
    â”‚Â Â  â”œâ”€â”€ channelhandle_9.jpg
    â”‚Â Â  â”œâ”€â”€ cliniqueblush_10.jpg
    â”‚Â Â  â”œâ”€â”€ cliniqueblush_1.jpg
    â”‚Â Â  â”œâ”€â”€ cliniqueblush_5.jpg
    â”‚Â Â  â”œâ”€â”€ cliniqueblush_6.jpg
    â”‚Â Â  â”œâ”€â”€ cliniqueblush_7.jpg
    â”‚Â Â  â”œâ”€â”€ cliniqueblush_9.jpg
    â”‚Â Â  â”œâ”€â”€ daoxiangcunjinzhubing_10.jpg
    â”‚Â Â  â”œâ”€â”€ daoxiangcunjinzhubing_1.jpg
    â”‚Â Â  â”œâ”€â”€ daoxiangcunjinzhubing_2.jpg
    â”‚Â Â  â”œâ”€â”€ daoxiangcunjinzhubing_6.jpg
    â”‚Â Â  â”œâ”€â”€ daoxiangcunjinzhubing_8.jpg
    â”‚Â Â  â”œâ”€â”€ daoxiangcunjinzhubing_9.jpg
    â”‚Â Â  â”œâ”€â”€ gannidress_03.jpg
    â”‚Â Â  â”œâ”€â”€ gannidress_07.jpg
    â”‚Â Â  â”œâ”€â”€ gannidress_08.jpg
    â”‚Â Â  â”œâ”€â”€ gannidress_09.jpg
    â”‚Â Â  â”œâ”€â”€ gannidress_10.jpg
    â”‚Â Â  â”œâ”€â”€ gannilianyiqun_02.jpg
    â”‚Â Â  â”œâ”€â”€ gannilianyiqun_03.jpg
    â”‚Â Â  â”œâ”€â”€ gannilianyiqun_04.jpg
    â”‚Â Â  â”œâ”€â”€ gannilianyiqun_05.jpg
    â”‚Â Â  â”œâ”€â”€ gannilianyiqun_07.jpg
    â”‚Â Â  â”œâ”€â”€ gbyingerche_11.jpg
    â”‚Â Â  â”œâ”€â”€ gbyingerche_12.jpg
    â”‚Â Â  â”œâ”€â”€ gbyingerche_15.jpg
    â”‚Â Â  â”œâ”€â”€ gbyingerche_7.jpg
    â”‚Â Â  â”œâ”€â”€ gbyingerche_8.jpg
    â”‚Â Â  â”œâ”€â”€ gbyingerche_9.jpg
    â”‚Â Â  â”œâ”€â”€ iphone12pro_10.jpg
    â”‚Â Â  â”œâ”€â”€ iphone12pro_1.jpg
    â”‚Â Â  â”œâ”€â”€ iphone12pro_2.jpg
    â”‚Â Â  â”œâ”€â”€ iphone12pro_4.jpg
    â”‚Â Â  â”œâ”€â”€ iphone12pro_5.jpg
    â”‚Â Â  â”œâ”€â”€ iphone12pro_7.jpg
    â”‚Â Â  â”œâ”€â”€ iphone12pro_8.jpg
    â”‚Â Â  â”œâ”€â”€ lafiolewine_01.jpg
    â”‚Â Â  â”œâ”€â”€ lafiolewine_03.jpg
    â”‚Â Â  â”œâ”€â”€ lafiolewine_04.jpg
    â”‚Â Â  â”œâ”€â”€ lafiolewine_08.jpg
    â”‚Â Â  â”œâ”€â”€ legaoaishao_1.jpg
    â”‚Â Â  â”œâ”€â”€ legaoaishao_2.jpg
    â”‚Â Â  â”œâ”€â”€ legaoaishao_3.jpg
    â”‚Â Â  â”œâ”€â”€ legaoaishao_5.jpg
    â”‚Â Â  â”œâ”€â”€ legaoaishao_6.jpg
    â”‚Â Â  â”œâ”€â”€ legaoaishao_7.jpg
    â”‚Â Â  â”œâ”€â”€ lvnano_1.jpg
    â”‚Â Â  â”œâ”€â”€ lvnano_3.jpg
    â”‚Â Â  â”œâ”€â”€ lvnano_5.jpg
    â”‚Â Â  â”œâ”€â”€ lvnano_9.jpg
    â”‚Â Â  â”œâ”€â”€ macpro_10.jpg
    â”‚Â Â  â”œâ”€â”€ macpro_11.jpg
    â”‚Â Â  â”œâ”€â”€ macpro_12.jpg
    â”‚Â Â  â”œâ”€â”€ macpro_13.jpg
    â”‚Â Â  â”œâ”€â”€ macpro_14.jpg
    â”‚Â Â  â”œâ”€â”€ macpro_15.jpg
    â”‚Â Â  â”œâ”€â”€ macpro_5.jpg
    â”‚Â Â  â”œâ”€â”€ pulipulai_12.jpg
    â”‚Â Â  â”œâ”€â”€ pulipulai_13.jpg
    â”‚Â Â  â”œâ”€â”€ pulipulai_14.jpg
    â”‚Â Â  â”œâ”€â”€ pulipulai_15.jpg
    â”‚Â Â  â”œâ”€â”€ pulipulai_2.jpg
    â”‚Â Â  â”œâ”€â”€ pulipulai_7.jpg
    â”‚Â Â  â”œâ”€â”€ pulipulai_8.jpg
    â”‚Â Â  â”œâ”€â”€ quanyoushafa_1.jpg
    â”‚Â Â  â”œâ”€â”€ quanyoushafa_3.jpg
    â”‚Â Â  â”œâ”€â”€ quanyoushafa_4.jpg
    â”‚Â Â  â”œâ”€â”€ quanyoushafa_5.jpg
    â”‚Â Â  â”œâ”€â”€ quanyoushafa_6.jpg
    â”‚Â Â  â”œâ”€â”€ quanyoushafa_9.jpg
    â”‚Â Â  â”œâ”€â”€ taochunqiu_10.jpg
    â”‚Â Â  â”œâ”€â”€ taochunqiu_13.jpg
    â”‚Â Â  â”œâ”€â”€ taochunqiu_15.jpg
    â”‚Â Â  â”œâ”€â”€ taochunqiu_2.jpg
    â”‚Â Â  â”œâ”€â”€ taochunqiu_7.jpg
    â”‚Â Â  â”œâ”€â”€ taochunqiu_8.jpg
    â”‚Â Â  â”œâ”€â”€ tfeyeshadow_10.jpg
    â”‚Â Â  â”œâ”€â”€ tfeyeshadow_6.jpg
    â”‚Â Â  â”œâ”€â”€ tfeyeshadow_9.jpg
    â”‚Â Â  â”œâ”€â”€ thinkpad_s2_10.jpg
    â”‚Â Â  â”œâ”€â”€ thinkpad_s2_13.jpg
    â”‚Â Â  â”œâ”€â”€ thinkpad_s2_14.jpg
    â”‚Â Â  â”œâ”€â”€ thinkpad_s2_15.jpg
    â”‚Â Â  â”œâ”€â”€ thinkpad_s2_1.jpg
    â”‚Â Â  â”œâ”€â”€ thinkpad_s2_4.jpg
    â”‚Â Â  â”œâ”€â”€ thinkpad_s2_5.jpg
    â”‚Â Â  â”œâ”€â”€ thinkpad_s2_7.jpg
    â”‚Â Â  â”œâ”€â”€ thinkpad_s2_8.jpg
    â”‚Â Â  â”œâ”€â”€ weiduomeinaiyougege_10.jpg
    â”‚Â Â  â”œâ”€â”€ weiduomeinaiyougege_1.jpg
    â”‚Â Â  â”œâ”€â”€ weiduomeinaiyougege_3.jpg
    â”‚Â Â  â”œâ”€â”€ weiduomeinaiyougege_4.jpg
    â”‚Â Â  â”œâ”€â”€ weiduomeinaiyougege_6.jpg
    â”‚Â Â  â”œâ”€â”€ weiduomeinaiyougege_7.jpg
    â”‚Â Â  â”œâ”€â”€ weiduomeinaiyougege_8.jpg
    â”‚Â Â  â”œâ”€â”€ weiduomeinaiyougege_9.jpg
    â”‚Â Â  â”œâ”€â”€ xiyangshen_10.jpg
    â”‚Â Â  â”œâ”€â”€ xiyangshen_12.jpg
    â”‚Â Â  â”œâ”€â”€ xiyangshen_2.jpg
    â”‚Â Â  â”œâ”€â”€ xiyangshen_3.jpg
    â”‚Â Â  â”œâ”€â”€ xiyangshen_7.jpg
    â”‚Â Â  â”œâ”€â”€ xiyangshen_8.jpg
    â”‚Â Â  â”œâ”€â”€ xiyangshen_9.jpg
    â”‚Â Â  â”œâ”€â”€ yunlingicewine_02.jpg
    â”‚Â Â  â”œâ”€â”€ yunlingicewine_05.jpg
    â”‚Â Â  â”œâ”€â”€ yunlingicewine_08.jpg
    â”‚Â Â  â”œâ”€â”€ yunlingicewine_10.jpg
    â”‚Â Â  â”œâ”€â”€ yunmuerlianyiqun_1.jpg
    â”‚Â Â  â”œâ”€â”€ yunmuerlianyiqun_4.jpg
    â”‚Â Â  â”œâ”€â”€ yunmuerlianyiqun_6.jpg
    â”‚Â Â  â”œâ”€â”€ yunmuerlianyiqun_7.jpg
    â”‚Â Â  â””â”€â”€ yunmuerlianyiqun_8.jpg
    â””â”€â”€ test_vehicle
        â”œâ”€â”€ audia4-102.jpeg
        â”œâ”€â”€ audia4-103.jpeg
        â”œâ”€â”€ audia4-105.jpeg
        â”œâ”€â”€ audia4-107.jpeg
        â”œâ”€â”€ audia5-114.jpeg
        â”œâ”€â”€ audia5-115.jpeg
        â”œâ”€â”€ audia5-118.jpeg
        â”œâ”€â”€ bentian-yage-101.jpeg
        â”œâ”€â”€ bentian-yage-105.png
        â”œâ”€â”€ bentian-yage-107.jpeg
        â”œâ”€â”€ bentian-yage-108.jpeg
        â”œâ”€â”€ bentian-yage-109.jpeg
        â”œâ”€â”€ bmw-m340-101.jpeg
        â”œâ”€â”€ bmw-m340-102.jpeg
        â”œâ”€â”€ bmw-m340-103.jpeg
        â”œâ”€â”€ bmw-m340-105.jpeg
        â”œâ”€â”€ bmw-m340-107.jpeg
        â”œâ”€â”€ bmw-m340-110.jpeg
        â”œâ”€â”€ porsche-cayenne-101.jpeg
        â”œâ”€â”€ porsche-cayenne-103.jpeg
        â”œâ”€â”€ porsche-cayenne-104.jpeg
        â”œâ”€â”€ porsche-cayenne-105.jpeg
        â”œâ”€â”€ porsche-cayenne-106.jpeg
        â””â”€â”€ porsche-cayenne-108.jpeg
    
    18 directories, 369 files



```python
# ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ä½¿ç”¨GPUè¿›è¡Œå›¾åƒè¯†åˆ«é¢„æµ‹ï¼Œå…¶ä¸­bboxè¡¨ç¤ºæ£€æµ‹å‡ºçš„ä¸»ä½“æ‰€åœ¨ä½ç½®ï¼Œrec_docsè¡¨ç¤ºç´¢å¼•åº“ä¸­ä¸æ£€æµ‹æ¡†æœ€ä¸ºç›¸ä¼¼çš„ç±»åˆ«ï¼Œrec_scoresè¡¨ç¤ºå¯¹åº”çš„ç½®ä¿¡åº¦ã€‚æ£€æµ‹çš„å¯è§†åŒ–ç»“æœä¹Ÿä¿å­˜åœ¨`output`æ–‡ä»¶å¤¹ä¸‹ï¼Œå¯¹äºæœ¬å¼ å›¾åƒï¼Œè¯†åˆ«ç»“æœå¯è§†åŒ–å¦‚ä¸‹æ‰€ç¤ºã€‚
!python3.7 ./python/predict_system.py -c ./configs/inference_product.yaml
# ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ä½¿ç”¨CPUè¿›è¡Œå›¾åƒè¯†åˆ«é¢„æµ‹ï¼Œå…¶ä¸­bboxè¡¨ç¤ºæ£€æµ‹å‡ºçš„ä¸»ä½“æ‰€åœ¨ä½ç½®ï¼Œrec_docsè¡¨ç¤ºç´¢å¼•åº“ä¸­ä¸æ£€æµ‹æ¡†æœ€ä¸ºç›¸ä¼¼çš„ç±»åˆ«ï¼Œrec_scoresè¡¨ç¤ºå¯¹åº”çš„ç½®ä¿¡åº¦ã€‚æ£€æµ‹çš„å¯è§†åŒ–ç»“æœä¹Ÿä¿å­˜åœ¨`output`æ–‡ä»¶å¤¹ä¸‹ï¼Œå¯¹äºæœ¬å¼ å›¾åƒï¼Œè¯†åˆ«ç»“æœå¯è§†åŒ–å¦‚ä¸‹æ‰€ç¤ºã€‚
# !python3.7 ./python/predict_system.py -c ./configs/inference_product.yaml -o Global.use_gpu=False

```

    2021-08-14 21:34:17 INFO: 
    ===========================================================
    ==        PaddleClas is powered by PaddlePaddle !        ==
    ===========================================================
    ==                                                       ==
    ==   For more info please go to the following website.   ==
    ==                                                       ==
    ==       https://github.com/PaddlePaddle/PaddleClas      ==
    ===========================================================
    
    2021-08-14 21:34:17 INFO: DetPostProcess : 
    2021-08-14 21:34:17 INFO: DetPreProcess : 
    2021-08-14 21:34:17 INFO:     transform_ops : 
    2021-08-14 21:34:17 INFO:         DetResize : 
    2021-08-14 21:34:17 INFO:             interp : 2
    2021-08-14 21:34:17 INFO:             keep_ratio : False
    2021-08-14 21:34:17 INFO:             target_size : [640, 640]
    2021-08-14 21:34:17 INFO:         DetNormalizeImage : 
    2021-08-14 21:34:17 INFO:             is_scale : True
    2021-08-14 21:34:17 INFO:             mean : [0.485, 0.456, 0.406]
    2021-08-14 21:34:17 INFO:             std : [0.229, 0.224, 0.225]
    2021-08-14 21:34:17 INFO:         DetPermute : 
    2021-08-14 21:34:17 INFO: Global : 
    2021-08-14 21:34:17 INFO:     batch_size : 1
    2021-08-14 21:34:17 INFO:     cpu_num_threads : 100
    2021-08-14 21:34:17 INFO:     det_inference_model_dir : ./models/ppyolov2_r50vd_dcn_mainbody_v1.0_infer
    2021-08-14 21:34:17 INFO:     enable_benchmark : True
    2021-08-14 21:34:17 INFO:     enable_mkldnn : False
    2021-08-14 21:34:17 INFO:     enable_profile : False
    2021-08-14 21:34:17 INFO:     gpu_mem : 8000
    2021-08-14 21:34:17 INFO:     image_shape : [3, 640, 640]
    2021-08-14 21:34:17 INFO:     infer_imgs : ./recognition_demo_data_v1.0/test_product/daoxiangcunjinzhubing_6.jpg
    2021-08-14 21:34:17 INFO:     ir_optim : True
    2021-08-14 21:34:17 INFO:     labe_list : ['foreground']
    2021-08-14 21:34:17 INFO:     max_det_results : 5
    2021-08-14 21:34:17 INFO:     rec_inference_model_dir : ./models/product_ResNet50_vd_aliproduct_v1.0_infer
    2021-08-14 21:34:17 INFO:     rec_nms_thresold : 0.05
    2021-08-14 21:34:17 INFO:     threshold : 0.2
    2021-08-14 21:34:17 INFO:     use_fp16 : False
    2021-08-14 21:34:17 INFO:     use_gpu : True
    2021-08-14 21:34:17 INFO:     use_tensorrt : False
    2021-08-14 21:34:17 INFO: IndexProcess : 
    2021-08-14 21:34:17 INFO:     dist_type : IP
    2021-08-14 21:34:17 INFO:     index_path : ./recognition_demo_data_v1.0/gallery_product/index
    2021-08-14 21:34:17 INFO:     return_k : 5
    2021-08-14 21:34:17 INFO:     score_thres : 0.5
    2021-08-14 21:34:17 INFO:     search_budget : 100
    2021-08-14 21:34:17 INFO: RecPostProcess : None
    2021-08-14 21:34:17 INFO: RecPreProcess : 
    2021-08-14 21:34:17 INFO:     transform_ops : 
    2021-08-14 21:34:17 INFO:         ResizeImage : 
    2021-08-14 21:34:17 INFO:             size : 224
    2021-08-14 21:34:17 INFO:         NormalizeImage : 
    2021-08-14 21:34:17 INFO:             mean : [0.485, 0.456, 0.406]
    2021-08-14 21:34:17 INFO:             order : 
    2021-08-14 21:34:17 INFO:             scale : 0.00392157
    2021-08-14 21:34:17 INFO:             std : [0.229, 0.224, 0.225]
    2021-08-14 21:34:17 INFO:         ToCHWImage : None
    Inference: 27.411699295043945 ms per batch image
    [{'bbox': [287, 129, 497, 326], 'rec_docs': 'ç¨»é¦™æ‘é‡‘çŒªé¥¼', 'rec_scores': 0.8309420943260193}, {'bbox': [99, 242, 313, 426], 'rec_docs': 'ç¨»é¦™æ‘é‡‘çŒªé¥¼', 'rec_scores': 0.7245651483535767}]



```python
# è¯†åˆ«ç»“æœå¯è§†åŒ–å¦‚ä¸‹æ‰€ç¤ºã€‚
import glob
import matplotlib.pyplot as plt
import matplotlib.image as mpimg
from tqdm import tqdm

%matplotlib inline
imgs = glob.glob('/home/aistudio/PaddleClas/deploy/output/*.jpg')
plt.figure(figsize=(16, 40))
for i in range(len(imgs)):
    img = mpimg.imread(imgs[i])
    plt.subplot(5, 2, i+1)
    plt.imshow(img)
plt.show()
```


![png](output_13_0.png)


# æœªçŸ¥ç±»åˆ«çš„å›¾åƒè¯†åˆ«
### å¦‚æœæƒ³æ–°åŠ å…¥å•†å“ç±»åˆ«ï¼ŒæŒ‰ç…§å¦‚ä¸‹æ–¹æ³•è¿›è¡Œæ·»åŠ 


```python
# é¦–å…ˆè¯†åˆ«æœªçŸ¥å›¾åƒï¼Œç»“æœå¦‚ä¸‹æ‰€ç¤ºä¸ºç©º
! python3.7 python/predict_system.py -c configs/inference_product.yaml -o Global.infer_imgs="./recognition_demo_data_v1.0/test_product/anmuxi.jpg"
```

    2021-08-14 21:38:27 INFO: 
    ===========================================================
    ==        PaddleClas is powered by PaddlePaddle !        ==
    ===========================================================
    ==                                                       ==
    ==   For more info please go to the following website.   ==
    ==                                                       ==
    ==       https://github.com/PaddlePaddle/PaddleClas      ==
    ===========================================================
    
    2021-08-14 21:38:27 INFO: DetPostProcess : 
    2021-08-14 21:38:27 INFO: DetPreProcess : 
    2021-08-14 21:38:27 INFO:     transform_ops : 
    2021-08-14 21:38:27 INFO:         DetResize : 
    2021-08-14 21:38:27 INFO:             interp : 2
    2021-08-14 21:38:27 INFO:             keep_ratio : False
    2021-08-14 21:38:27 INFO:             target_size : [640, 640]
    2021-08-14 21:38:27 INFO:         DetNormalizeImage : 
    2021-08-14 21:38:27 INFO:             is_scale : True
    2021-08-14 21:38:27 INFO:             mean : [0.485, 0.456, 0.406]
    2021-08-14 21:38:27 INFO:             std : [0.229, 0.224, 0.225]
    2021-08-14 21:38:27 INFO:         DetPermute : 
    2021-08-14 21:38:27 INFO: Global : 
    2021-08-14 21:38:27 INFO:     batch_size : 1
    2021-08-14 21:38:27 INFO:     cpu_num_threads : 100
    2021-08-14 21:38:27 INFO:     det_inference_model_dir : ./models/ppyolov2_r50vd_dcn_mainbody_v1.0_infer
    2021-08-14 21:38:27 INFO:     enable_benchmark : True
    2021-08-14 21:38:27 INFO:     enable_mkldnn : False
    2021-08-14 21:38:27 INFO:     enable_profile : False
    2021-08-14 21:38:27 INFO:     gpu_mem : 8000
    2021-08-14 21:38:27 INFO:     image_shape : [3, 640, 640]
    2021-08-14 21:38:27 INFO:     infer_imgs : ./recognition_demo_data_v1.0/test_product/anmuxi.jpg
    2021-08-14 21:38:27 INFO:     ir_optim : True
    2021-08-14 21:38:27 INFO:     labe_list : ['foreground']
    2021-08-14 21:38:27 INFO:     max_det_results : 5
    2021-08-14 21:38:27 INFO:     rec_inference_model_dir : ./models/product_ResNet50_vd_aliproduct_v1.0_infer
    2021-08-14 21:38:27 INFO:     rec_nms_thresold : 0.05
    2021-08-14 21:38:27 INFO:     threshold : 0.2
    2021-08-14 21:38:27 INFO:     use_fp16 : False
    2021-08-14 21:38:27 INFO:     use_gpu : True
    2021-08-14 21:38:27 INFO:     use_tensorrt : False
    2021-08-14 21:38:27 INFO: IndexProcess : 
    2021-08-14 21:38:27 INFO:     dist_type : IP
    2021-08-14 21:38:27 INFO:     index_path : ./recognition_demo_data_v1.0/gallery_product/index
    2021-08-14 21:38:27 INFO:     return_k : 5
    2021-08-14 21:38:27 INFO:     score_thres : 0.5
    2021-08-14 21:38:27 INFO:     search_budget : 100
    2021-08-14 21:38:27 INFO: RecPostProcess : None
    2021-08-14 21:38:27 INFO: RecPreProcess : 
    2021-08-14 21:38:27 INFO:     transform_ops : 
    2021-08-14 21:38:27 INFO:         ResizeImage : 
    2021-08-14 21:38:27 INFO:             size : 224
    2021-08-14 21:38:27 INFO:         NormalizeImage : 
    2021-08-14 21:38:27 INFO:             mean : [0.485, 0.456, 0.406]
    2021-08-14 21:38:27 INFO:             order : 
    2021-08-14 21:38:27 INFO:             scale : 0.00392157
    2021-08-14 21:38:27 INFO:             std : [0.229, 0.224, 0.225]
    2021-08-14 21:38:27 INFO:         ToCHWImage : None
    Inference: 22.237539291381836 ms per batch image
    []


### åŸå› æ˜¯é»˜è®¤çš„ç´¢å¼•åº“ä¸­ä¸åŒ…å«å¯¹åº”çš„ç´¢å¼•ä¿¡æ¯ï¼Œæ‰€ä»¥è¿™é‡Œçš„è¯†åˆ«ç»“æœæœ‰è¯¯ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡æ„å»ºæ–°çš„ç´¢å¼•åº“çš„æ–¹å¼ï¼Œå®ŒæˆæœªçŸ¥ç±»åˆ«çš„å›¾åƒè¯†åˆ«ã€‚


```python
# é¦–å…ˆéœ€è¦å°†ä¸å¾…æ£€ç´¢å›¾åƒç›¸ä¼¼çš„å›¾åƒåˆ—è¡¨æ‹·è´åˆ°ç´¢å¼•åº“åŸå§‹å›¾åƒçš„æ–‡ä»¶å¤¹(`./recognition_demo_data_v1.0/gallery_product/gallery`)ä¸­ã€‚
! cp -r  ../docs/images/recognition/product_demo/gallery/anmuxi ./recognition_demo_data_v1.0/gallery_product/gallery/
```


```python
# ç„¶åéœ€è¦ç¼–è¾‘è®°å½•äº†å›¾åƒè·¯å¾„å’Œæ ‡ç­¾ä¿¡æ¯çš„æ–‡æœ¬æ–‡ä»¶(`./recognition_demo_data_v1.0/gallery_product/data_file_update.txt`)
#è¿™é‡ŒåŸºäºåŸå§‹æ ‡ç­¾æ–‡ä»¶ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ã€‚å‘½ä»¤å¦‚ä¸‹ã€‚

! cp recognition_demo_data_v1.0/gallery_product/data_file.txt recognition_demo_data_v1.0/gallery_product/data_file_update.txt
```

ç„¶ååœ¨æ–‡ä»¶`recognition_demo_data_v1.0/gallery_product/data_file_update.txt`ä¸­æ·»åŠ ä»¥ä¸‹çš„ä¿¡æ¯ï¼Œ

```
gallery/anmuxi/001.jpg	å®‰æ…•å¸Œé…¸å¥¶
gallery/anmuxi/002.jpg	å®‰æ…•å¸Œé…¸å¥¶
gallery/anmuxi/003.jpg	å®‰æ…•å¸Œé…¸å¥¶
gallery/anmuxi/004.jpg	å®‰æ…•å¸Œé…¸å¥¶
gallery/anmuxi/005.jpg	å®‰æ…•å¸Œé…¸å¥¶
gallery/anmuxi/006.jpg	å®‰æ…•å¸Œé…¸å¥¶
```

æ¯ä¸€è¡Œçš„æ–‡æœ¬ä¸­ï¼Œç¬¬ä¸€ä¸ªå­—æ®µè¡¨ç¤ºå›¾åƒçš„ç›¸å¯¹è·¯å¾„ï¼Œç¬¬äºŒä¸ªå­—æ®µè¡¨ç¤ºå›¾åƒå¯¹åº”çš„æ ‡ç­¾ä¿¡æ¯ï¼Œä¸­é—´ç”¨`tab`é”®åˆ†éš”å¼€ï¼ˆæ³¨æ„ï¼šæœ‰äº›ç¼–è¾‘å™¨ä¼šå°†`tab`è‡ªåŠ¨è½¬æ¢ä¸º`ç©ºæ ¼`ï¼Œè¿™ç§æƒ…å†µä¸‹ä¼šå¯¼è‡´æ–‡ä»¶è§£ææŠ¥é”™ï¼‰ã€‚


```python
# ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ„å»ºindexç´¢å¼•ï¼ŒåŠ é€Ÿè¯†åˆ«åçš„æ£€ç´¢è¿‡ç¨‹ã€‚æœ€ç»ˆæ–°çš„ç´¢å¼•ä¿¡æ¯ä¿å­˜åœ¨æ–‡ä»¶å¤¹./recognition_demo_data_v1.0/gallery_product/index_updateä¸­ã€‚
! python3.7 python/build_gallery.py -c configs/build_product.yaml -o IndexProcess.data_file="./recognition_demo_data_v1.0/gallery_product/data_file_update.txt" -o IndexProcess.index_path="./recognition_demo_data_v1.0/gallery_product/index_update"
```

    2021-08-14 21:49:55 INFO: 
    ===========================================================
    ==        PaddleClas is powered by PaddlePaddle !        ==
    ===========================================================
    ==                                                       ==
    ==   For more info please go to the following website.   ==
    ==                                                       ==
    ==       https://github.com/PaddlePaddle/PaddleClas      ==
    ===========================================================
    
    2021-08-14 21:49:55 INFO: Global : 
    2021-08-14 21:49:55 INFO:     batch_size : 1
    2021-08-14 21:49:55 INFO:     cpu_num_threads : 100
    2021-08-14 21:49:55 INFO:     enable_benchmark : True
    2021-08-14 21:49:55 INFO:     enable_mkldnn : False
    2021-08-14 21:49:55 INFO:     enable_profile : False
    2021-08-14 21:49:55 INFO:     gpu_mem : 8000
    2021-08-14 21:49:55 INFO:     ir_optim : True
    2021-08-14 21:49:55 INFO:     rec_inference_model_dir : ./models/product_ResNet50_vd_aliproduct_v1.0_infer
    2021-08-14 21:49:55 INFO:     use_fp16 : False
    2021-08-14 21:49:55 INFO:     use_gpu : True
    2021-08-14 21:49:55 INFO:     use_tensorrt : False
    2021-08-14 21:49:55 INFO: IndexProcess : 
    2021-08-14 21:49:55 INFO:     data_file : ./recognition_demo_data_v1.0/gallery_product/data_file_update.txt
    2021-08-14 21:49:55 INFO:     delimiter : 	
    2021-08-14 21:49:55 INFO:     dist_type : IP
    2021-08-14 21:49:55 INFO:     embedding_size : 512
    2021-08-14 21:49:55 INFO:     image_root : ./recognition_demo_data_v1.0/gallery_product/
    2021-08-14 21:49:55 INFO:     index_path : ./recognition_demo_data_v1.0/gallery_product/index_update
    2021-08-14 21:49:55 INFO:     pq_size : 100
    2021-08-14 21:49:55 INFO: RecPostProcess : None
    2021-08-14 21:49:55 INFO: RecPreProcess : 
    2021-08-14 21:49:55 INFO:     transform_ops : 
    2021-08-14 21:49:55 INFO:         ResizeImage : 
    2021-08-14 21:49:55 INFO:             size : 224
    2021-08-14 21:49:55 INFO:         NormalizeImage : 
    2021-08-14 21:49:55 INFO:             mean : [0.485, 0.456, 0.406]
    2021-08-14 21:49:55 INFO:             order : 
    2021-08-14 21:49:55 INFO:             scale : 0.00392157
    2021-08-14 21:49:55 INFO:             std : [0.229, 0.224, 0.225]
    2021-08-14 21:49:55 INFO:         ToCHWImage : None
    100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 82/82 [00:03<00:00, 22.27it/s]
    training index -> num: 82, dim: 512, dist_type: IP
    finished creating index ...


ä½¿ç”¨æ–°çš„ç´¢å¼•åº“ï¼Œå¯¹ä¸Šè¿°å›¾åƒè¿›è¡Œè¯†åˆ«ï¼Œè¿è¡Œå‘½ä»¤å¦‚ä¸‹ã€‚

```shell
# ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ä½¿ç”¨GPUè¿›è¡Œé¢„æµ‹ï¼Œå¦‚æœå¸Œæœ›ä½¿ç”¨CPUé¢„æµ‹ï¼Œå¯ä»¥åœ¨å‘½ä»¤åé¢æ·»åŠ -o Global.use_gpu=False
python3.7 python/predict_system.py -c configs/inference_product.yaml -o Global.infer_imgs="./recognition_demo_data_v1.0/test_product/anmuxi.jpg" -o IndexProcess.index_path="./recognition_demo_data_v1.0/gallery_product/index_update"
```

è¾“å‡ºç»“æœå¦‚ä¸‹ã€‚

```
[{'bbox': [243, 80, 523, 522], 'rec_docs': 'å®‰æ…•å¸Œé…¸å¥¶', 'rec_scores': 0.5570770502090454}]
```

æœ€ç»ˆè¯†åˆ«ç»“æœä¸º`å®‰æ…•å¸Œé…¸å¥¶`ï¼Œè¯†åˆ«æ­£ç¡®ï¼Œè¯†åˆ«ç»“æœå¯è§†åŒ–å¦‚ä¸‹æ‰€ç¤ºã€‚


```python
# ä½¿ç”¨æ–°çš„ç´¢å¼•åº“ï¼Œå¯¹ä¸Šè¿°å›¾åƒè¿›è¡Œè¯†åˆ«ï¼Œè¿è¡Œå‘½ä»¤å¦‚ä¸‹ã€‚
# ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ä½¿ç”¨GPUè¿›è¡Œé¢„æµ‹ï¼Œå¦‚æœå¸Œæœ›ä½¿ç”¨CPUé¢„æµ‹ï¼Œå¯ä»¥åœ¨å‘½ä»¤åé¢æ·»åŠ -o Global.use_gpu=False
! python3.7 python/predict_system.py -c configs/inference_product.yaml -o Global.infer_imgs="./recognition_demo_data_v1.0/test_product/anmuxi.jpg" -o IndexProcess.index_path="./recognition_demo_data_v1.0/gallery_product/index_update"
```

    2021-08-14 21:51:59 INFO: 
    ===========================================================
    ==        PaddleClas is powered by PaddlePaddle !        ==
    ===========================================================
    ==                                                       ==
    ==   For more info please go to the following website.   ==
    ==                                                       ==
    ==       https://github.com/PaddlePaddle/PaddleClas      ==
    ===========================================================
    
    2021-08-14 21:51:59 INFO: DetPostProcess : 
    2021-08-14 21:51:59 INFO: DetPreProcess : 
    2021-08-14 21:51:59 INFO:     transform_ops : 
    2021-08-14 21:51:59 INFO:         DetResize : 
    2021-08-14 21:51:59 INFO:             interp : 2
    2021-08-14 21:51:59 INFO:             keep_ratio : False
    2021-08-14 21:51:59 INFO:             target_size : [640, 640]
    2021-08-14 21:51:59 INFO:         DetNormalizeImage : 
    2021-08-14 21:51:59 INFO:             is_scale : True
    2021-08-14 21:51:59 INFO:             mean : [0.485, 0.456, 0.406]
    2021-08-14 21:51:59 INFO:             std : [0.229, 0.224, 0.225]
    2021-08-14 21:51:59 INFO:         DetPermute : 
    2021-08-14 21:51:59 INFO: Global : 
    2021-08-14 21:51:59 INFO:     batch_size : 1
    2021-08-14 21:51:59 INFO:     cpu_num_threads : 100
    2021-08-14 21:51:59 INFO:     det_inference_model_dir : ./models/ppyolov2_r50vd_dcn_mainbody_v1.0_infer
    2021-08-14 21:51:59 INFO:     enable_benchmark : True
    2021-08-14 21:51:59 INFO:     enable_mkldnn : False
    2021-08-14 21:51:59 INFO:     enable_profile : False
    2021-08-14 21:51:59 INFO:     gpu_mem : 8000
    2021-08-14 21:51:59 INFO:     image_shape : [3, 640, 640]
    2021-08-14 21:51:59 INFO:     infer_imgs : ./recognition_demo_data_v1.0/test_product/anmuxi.jpg
    2021-08-14 21:51:59 INFO:     ir_optim : True
    2021-08-14 21:51:59 INFO:     labe_list : ['foreground']
    2021-08-14 21:51:59 INFO:     max_det_results : 5
    2021-08-14 21:51:59 INFO:     rec_inference_model_dir : ./models/product_ResNet50_vd_aliproduct_v1.0_infer
    2021-08-14 21:51:59 INFO:     rec_nms_thresold : 0.05
    2021-08-14 21:51:59 INFO:     threshold : 0.2
    2021-08-14 21:51:59 INFO:     use_fp16 : False
    2021-08-14 21:51:59 INFO:     use_gpu : True
    2021-08-14 21:51:59 INFO:     use_tensorrt : False
    2021-08-14 21:51:59 INFO: IndexProcess : 
    2021-08-14 21:51:59 INFO:     dist_type : IP
    2021-08-14 21:51:59 INFO:     index_path : ./recognition_demo_data_v1.0/gallery_product/index_update
    2021-08-14 21:51:59 INFO:     return_k : 5
    2021-08-14 21:51:59 INFO:     score_thres : 0.5
    2021-08-14 21:51:59 INFO:     search_budget : 100
    2021-08-14 21:51:59 INFO: RecPostProcess : None
    2021-08-14 21:51:59 INFO: RecPreProcess : 
    2021-08-14 21:51:59 INFO:     transform_ops : 
    2021-08-14 21:51:59 INFO:         ResizeImage : 
    2021-08-14 21:51:59 INFO:             size : 224
    2021-08-14 21:51:59 INFO:         NormalizeImage : 
    2021-08-14 21:51:59 INFO:             mean : [0.485, 0.456, 0.406]
    2021-08-14 21:51:59 INFO:             order : 
    2021-08-14 21:51:59 INFO:             scale : 0.00392157
    2021-08-14 21:51:59 INFO:             std : [0.229, 0.224, 0.225]
    2021-08-14 21:51:59 INFO:         ToCHWImage : None
    Inference: 22.269248962402344 ms per batch image
    [{'bbox': [243, 80, 523, 522], 'rec_docs': 'å®‰æ…•å¸Œé…¸å¥¶', 'rec_scores': 0.5570769906044006}]



```python
# æœ€ç»ˆè¯†åˆ«ç»“æœä¸º`å®‰æ…•å¸Œé…¸å¥¶`ï¼Œè¯†åˆ«æ­£ç¡®ï¼Œè¯†åˆ«ç»“æœå¯è§†åŒ–å¦‚ä¸‹æ‰€ç¤ºã€‚
import glob
import matplotlib.pyplot as plt
import matplotlib.image as mpimg
from tqdm import tqdm

%matplotlib inline
imgs = glob.glob('/home/aistudio/PaddleClas/deploy/recognition_demo_data_v1.0/gallery_product/gallery/anmuxi/*.jpg')
plt.figure(figsize=(16, 40))
for i in range(len(imgs)):
    img = mpimg.imread(imgs[i])
    plt.subplot(5, 2, i+1)
    plt.imshow(img)
plt.show()
```


![png](output_23_0.png)


# æ€»ç»“
PaddleClaså¥—ä»¶æä¾›çš„å›¾åƒå¿«é€Ÿè¯†åˆ«ç³»ç»Ÿéå¸¸é€‚ç”¨äºæ ·æœ¬é‡å°‘ã€ç±»åˆ«å¤šã€æ–°ç±»åˆ«å¢åŠ æ¯”è¾ƒå¿«ï¼Œä¸æƒ³é‡è®­æ¨¡å‹è¿™æ ·çš„åœºæ™¯ã€‚åœ¨è¿™äº›åœºæ™¯ä¸‹ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹+ç´¢å¼•åº“çš„æ–¹å¼å¯ä»¥é¿å…é‡å¤å¤šæ¬¡çš„æ¨¡å‹è®­ç»ƒï¼ŒèŠ‚çœå¤§é‡çš„ç®—åŠ›èµ„æºã€‚

# ä¸ªäººç®€ä»‹
æˆ‘åœ¨AI Studioä¸Šè·å¾—é»„é‡‘ç­‰çº§ï¼Œç‚¹äº®0ä¸ªå¾½ç« ï¼Œæ¥äº’å…³å‘€~ https://aistudio.baidu.com/aistudio/personalcenter/thirdview/292614

è¯·ç‚¹å‡»[æ­¤å¤„](https://ai.baidu.com/docs#/AIStudio_Project_Notebook/a38e5576)æŸ¥çœ‹æœ¬ç¯å¢ƒåŸºæœ¬ç”¨æ³•.  <br>
Please click [here ](https://ai.baidu.com/docs#/AIStudio_Project_Notebook/a38e5576) for more detailed instructions. 
